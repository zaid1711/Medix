# MEDIX ELECTRONIC HEALTH RECORD (EHR) SYSTEM\n\n## Title Page / Cover\n**Project Title:** Medix: Blockchain-Backed Electronic Health Record Management System\n**Domain:** Healthcare Technology / Health Informatics / Web & Blockchain Application\n**Technologies:** Next.js 14 (React), TypeScript, Tailwind CSS, Node.js (Express), MongoDB, Solidity (Hardhat), IPFS/File Storage (local uploads), JWT Authentication\n**Version:** 2.0\n**Authors:** (Add your team members here)\n**Academic Year / Term:** (Add if for academic submission)\n**Institution / Department:** (Add details)\n**Guide / Supervisor:** (Add name)\n\n---\n## Abstract\nMedix is an integrated Electronic Health Record (EHR) management platform designed to securely manage patient data, appointments, medical documents, and role-specific dashboards for administrators, doctors, and patients. The system combines a modern web application stack with blockchain-based smart contracts to ensure transparency, auditability, and potential immutability for critical health transactions. Core features include user management, appointment scheduling with file uploads, medical record viewing/downloading, secure authentication, toast-based notifications, and an administrative analytics dashboard displaying real-time system statistics.\n\nThe solution addresses fragmented healthcare data, poor interoperability, weak audit trails, and lack of patient-centric control. Medix provides a scalable foundation extensible to on-chain data notarization, consent management, telemedicine integration, and predictive analytics.\n\n---\n## Problem Statement\nHealthcare providers and patients often struggle with:\n1. Disparate systems lacking unified access to health records.\n2. Manual or insecure transfer of medical documents.\n3. Limited transparency over who accessed or modified sensitive patient data.\n4. Difficulty aggregating usage and operational metrics for administrators.\n5. Absence of immutable audit trails for medico-legal and compliance needs.\n\nThe existing approach leads to inefficiencies, data duplication, security risks, and reduced patient trust. There is a need for a secure, role-based, user-friendly, and extendable platform capable of integrating blockchain-level auditability with conventional web performance.\n\n---\n## Objectives\n**Primary Objectives:**\n- Provide a unified portal for Patients, Doctors, and Admins.\n- Allow secure storage and retrieval of medical documents.\n- Enable appointment scheduling with optional file uploads.\n- Implement real-time dashboards with accurate statistics.\n- Offer secure authentication and role-based authorization.\n- Integrate smart contracts for potential data notarization and event logging.\n\n**Secondary Objectives:**\n- Improve UI/UX with responsive, minimal, and accessible design.\n- Introduce modular, testable architecture for future scalability.\n- Facilitate auditability via blockchain transaction integration (future expansion).\n- Support growth metrics, member onboarding tracking, and actionable insights.\n\n---\n## Scope\nThe current scope focuses on core operational workflows (user management, appointments, records, dashboards) and the foundational blockchain layer. Future enhancements (consent mgmt, interoperability APIs, AI analytics) are outlined under "Future Scope".\n\n---\n## Existing System vs Proposed System\n| Aspect | Existing / Traditional Systems | Proposed (Medix) |\n|--------|--------------------------------|------------------|\n| Record Integrity | Centralized, mutable | Hybrid with smart contract anchoring |\n| Audit Trails | Limited or internal logs | On-chain events (extensible) + backend logs |\n| User Roles | Often monolithic | Distinct: Admin / Doctor / Patient |\n| Document Handling | Manual email/uploads | Structured uploads & retrieval with metadata |\n| Appointment Workflow | Manual scheduling | Digital scheduling + file attachments |\n| Patient Empowerment | Passive | Active access & potential future consent mgmt |\n| Observability | Fragmented reports | Real-time dashboard stats |\n| Extensibility | Vendor-locked | Modular microservice-ready architecture |\n\n---\n## System Architecture Overview\n**Layers:**\n1. Presentation Layer: Next.js (App Router) + Tailwind CSS + Toast Notifications.\n2. Application Layer: React components, role-specific dashboards, context providers.\n3. API Layer: Express backend with REST endpoints (Users, Appointments, Records, Auth).\n4. Data Layer: MongoDB collections (Users, Appointments, Documents/Records).\n5. Blockchain Layer: Solidity smart contract(s) (EHRContract, Counter) deployed via Hardhat for potential logging or counters.\n6. Storage Layer: Local file upload directory (future: IPFS / cloud object storage).\n\n**Data Flow:**\nUser interacts via browser → Next.js pages/components → API calls (axios/fetch) → Express Controllers → MongoDB CRUD → (optional) Smart Contract interactions → Response rendered + toast feedback.\n\n**Key Design Patterns:**\n- Separation of concerns (UI vs API vs Contract).\n- Promise.all for parallel stat aggregation.\n- Context Provider for Toast system.\n- Reusable UI primitives (buttons, cards, modals).\n- Role-based conditional rendering.\n\n---\n## Module Description\n1. Authentication Module: Login & Register (JWT issuance, password hashing).\n2. Role Management: Differentiates Admin, Doctor, Patient behavior & navigation.\n3. User Management (Admin): View all users, filter by role, delete non-admins.\n4. Dashboard (Admin): Real-time statistics (Patients, Doctors, Appointments, Records, New Members, Growth Rate).\n5. Patient Module: Appointment scheduling with file upload (medical records), profile management.\n6. Doctor Module: View assigned patients, appointments, message interface (future expansion).\n7. Medical Records Module: Upload, view, and download patient documents.\n8. Notification Module: Custom toast provider for success/error/info feedback.\n9. Smart Contract Module: Solidity contracts for counters / placeholder for record anchoring and audit events.\n10. UI/Design System: Gradient navbar, glass morphism effects, consistent iconography (Lucide).\n\n---\n## Detailed Feature Set\n- Secure JWT Authentication with role claims.\n- Responsive and accessible UI in Next.js App Router.\n- Appointment scheduling includes document uploads (FormData).\n- Records viewing & downloading interface (PDF, images).\n- Admin analytics: user growth, monthly new members, appointment and record counts.\n- Filtering and searching users by name/email.\n- Protected deletion workflow with confirmation modals (non-admin only).\n- Toast notifications replacing native alerts.\n- Modular components for dashboards, forms, and layouts.\n\n---\n## Data Models (Conceptual)\n### User\n````ts\nUser {\n  id: string\n  name: string\n  email: string\n  passwordHash: string\n  role: 'Admin' | 'Doctor' | 'Patient'\n  createdAt: Date\n}\n````\n### Appointment\n````ts\nAppointment {\n  id: string\n  patientId: string\n  doctorId: string\n  date: Date\n  reason: string\n  attachments: string[] // file paths\n  status: 'Scheduled' | 'Completed' | 'Cancelled'\n  createdAt: Date\n}\n````\n### MedicalRecord (Document)\n````ts\nMedicalRecord {\n  id: string\n  patientId: string\n  title: string\n  filePath: string\n  mimeType: string\n  uploadedAt: Date\n}\n````\n---\n## API Endpoints (Representative)\n| Method | Endpoint | Purpose | Auth |\n|--------|----------|---------|------|\n| POST | /auth/login | Authenticate user & issue JWT | Public |\n| POST | /auth/register | Register new patient/doctor | Public |\n| GET | /users | List all users (admin) | Admin |\n| DELETE | /users/:id | Delete non-admin user | Admin |\n| GET | /appointments | List appointments | Admin/Doctor/Patient (filtered) |\n| POST | /appointments | Create appointment w/ files | Patient |\n| GET | /records | List medical records | Role-based |\n| GET | /records/:id/download | Download file | Authorized |\n| POST | /records | Upload new record | Patient/Doctor |\n| GET | /dashboard/stats | Aggregate counts | Admin |\n\n---\n## Smart Contracts (Solidity)\n- `EHRContract.sol`: Placeholder for future features such as on-chain hash anchoring of medical records, consent flags, and audit events. Currently may store counters or references.\n- `Counter.sol`: Simple counter used for demonstration/testing of blockchain integration.\n\n**Potential Future Enhancements:**\n- Store SHA-256 hash of each uploaded medical record on-chain for integrity verification.\n- Implement patient-controlled consent toggles via smart contract state variables.\n- Emit events for record creation/access to build immutable audit trails.\n\n---\n## Security Considerations\n- JWT-based stateless authentication.\n- Role-based authorization enforced in backend routes and conditional UI rendering.\n- Password hashing (e.g., bcrypt) recommended (confirm implementation).\n- File upload validation: MIME type & size checks (extend as needed).\n- Avoid deletion of Admin accounts; protected logic in UI & API.\n- Potential implementation of rate limiting & audit logging (future).\n- Smart contract layer can provide tamper-evident logging once hashes/events are integrated.\n\n---\n## UI/UX Design Principles\n- Minimal, clean dashboard cards with gradient backgrounds.\n- Glass morphism navbar for modern aesthetic.\n- Consistent iconography using `lucide-react`.\n- Responsive layout (mobile/tablet/desktop).\n- Accessible color contrasts & semantic HTML structure.\n- Toast notifications for non-blocking feedback.\n\n---\n## Testing Strategy\n**Current:**\n- Manual functional testing of user flows (login, register, upload, schedule, delete).\n- Client rendering validation and basic component tests (placeholder: `App.test.js`).\n\n**Recommended Additions:**\n- Unit tests: Services (usersApi, appointmentsApi).\n- Integration tests: Appointment creation with file upload.\n- Smart contract tests (Hardhat) for event emission & hash anchoring.\n- Security tests: Authorization bypass attempts, malformed JWT, large file uploads.\n- Performance tests: Concurrent appointments & dashboard stat aggregation.\n\n---\n## Deployment & Environment\n- Development: Local Node.js & MongoDB instance, Hardhat local blockchain network.\n- Build: Next.js production build (`next build`) + Express server.\n- Recommended Production Stack: Containerized services (Docker), managed MongoDB (Atlas), IPFS or S3 for document storage, Ethereum testnet/mainnet or Polygon for contract deployment.\n\n---\n## Future Scope\n1. On-chain hash storage & consent ledger.\n2. Telemedicine consultation integration (video + prescriptions).\n3. HL7 / FHIR interoperability API layer.\n4. AI-driven analytics (disease risk, appointment optimization).\n5. Role expansions: Lab Technician, Insurance Agent.\n6. Multi-factor authentication & OAuth provider login.\n7. Encrypted at-rest document storage (e.g., using KMS).\n8. Notification channels (email/SMS/WebSocket real-time updates).\n9. Audit dashboard with exportable compliance reports.\n10. Mobile app (React Native) leveraging same API.\n\n---\n## Project Timeline (Sample)\n| Phase | Tasks | Duration |\n|-------|-------|----------|\n| Requirements | Gather functional/non-functional specs | 1 week |\n| Design | Architecture, UI wireframes, data models | 1 week |\n| Implementation I | Auth, Users, Roles, Base UI | 2 weeks |\n| Implementation II | Appointments, Records, Uploads | 2 weeks |\n| Integration | Smart contracts + dashboard stats | 1 week |\n| Testing | Functional, integration, fixes | 1 week |\n| Enhancement | UI polish, performance, docs | 1 week |\n\n---\n## Challenges & Mitigations\n| Challenge | Mitigation |\n|----------|-----------|\n| Sensitive data handling | Use hashed passwords, plan encryption, restrict access |\n| Scalability of file storage | Abstract storage service; plan migration to S3/IPFS |\n| Blockchain cost (gas) | Store only hashes/events; off-chain full data |\n| Role escalation attacks | Strict role checks server-side & token validation |\n| Data consistency during concurrent stats fetch | Use atomic queries & caching if needed |\n\n---\n## Conclusion\nMedix delivers a modern, modular EHR platform integrating web scalability with prospective blockchain-based integrity features. It improves administrative visibility, patient empowerment, and operational efficiency. With its extensible architecture and clearly defined future scope, Medix can evolve into a comprehensive health informatics solution meeting compliance, interoperability, and security demands.\n\n---\n## References\n1. HL7 FHIR Standards: https://hl7.org/fhir/\n2. Ethereum Smart Contract Best Practices: https://consensys.github.io/smart-contract-best-practices/\n3. OWASP Web Security Guidelines: https://owasp.org/www-project-top-ten/\n4. Next.js Documentation: https://nextjs.org/docs\n5. MongoDB Data Modeling Guide: https://www.mongodb.com/docs/manual/core/data-modeling-introduction/\n6. Hardhat Documentation: https://hardhat.org/\n7. Tailwind CSS Docs: https://tailwindcss.com/docs\n\n---\n*Customize author/institution details above before final submission.*\n
